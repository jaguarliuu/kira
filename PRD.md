# OpenClaw Preview - 产品需求文档（PRD）

## 1. 产品概述

### 1.1 产品名称
**OpenClaw Preview** - OpenClaw Agent 输出预览平台

### 1.2 产品定位
一个基于 React + GitHub Pages 的轻量级内容预览平台，让 OpenClaw 用户能够自动同步和预览 Agent 生成的文档、HTML 和图片。

### 1.3 目标用户
- **主要用户**：OpenClaw 用户（开发者、内容创作者）
- **次要用户**：团队成员、内容审阅者

### 1.4 核心价值
- ✅ **零成本**：基于 GitHub Pages，完全免费
- ✅ **自动化**：Skill 驱动，无需手动操作
- ✅ **可视化**：现代化 UI，支持 MD/HTML/图片预览
- ✅ **协作友好**：支持多 Agent、团队共享

---

## 2. 痛点与解决方案

### 2.1 当前痛点

| 痛点 | 严重程度 | 频率 |
|------|----------|------|
| AI 生成的 MD/HTML 无法预览 | 🔴 高 | 每天多次 |
| 图片需要手动下载或上传 | 🔴 高 | 每天多次 |
| 无法验证输出质量 | 🟡 中 | 每周几次 |
| 工作流被打断 | 🟡 中 | 每天多次 |
| 无法分享给团队 | 🟡 中 | 偶尔 |

### 2.2 现有方案对比

| 方案 | 小白友好 | 自动化 | 移动端 | 分享 | 成本 |
|-----|---------|--------|--------|------|------|
| Canvas | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ | ⭐ | 免费 |
| Telegram | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | 免费 |
| 云存储 | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 付费 |
| **GitHub Pages（本方案）** | **⭐⭐⭐⭐** | **⭐⭐⭐⭐⭐** | **⭐⭐⭐⭐⭐** | **⭐⭐⭐⭐⭐** | **免费** |

### 2.3 我们的解决方案

**核心思路：**
```
Agent 生成内容
  ↓
preview-sync Skill 自动同步
  ↓
Git commit + push
  ↓
GitHub Pages 自动构建
  ↓
用户在线预览
```

**关键优势：**
1. **自动化工作流** - Skill 自动处理，用户无感知
2. **版本管理** - Git 记录所有历史版本
3. **多 Agent 支持** - 每个 Agent 独立目录
4. **零运维成本** - GitHub Pages 自动部署

---

## 3. 功能需求

### 3.1 核心功能

#### F1: Agent 工作区展示
- **优先级**：P0
- **描述**：展示所有 Agent 的工作区列表
- **功能点**：
  - Agent 列表（名称、头像、简介）
  - 最近更新时间
  - 文件数量统计
  - 快速访问入口

#### F2: 文件浏览
- **优先级**：P0
- **描述**：浏览 Agent 输出的所有文件
- **功能点**：
  - 文件列表（树形结构）
  - 文件类型图标（MD/HTML/图片）
  - 文件大小、更新时间
  - 搜索过滤

#### F3: Markdown 渲染
- **优先级**：P0
- **描述**：渲染 Markdown 文件
- **功能点**：
  - GitHub 风格 Markdown
  - 代码高亮
  - 表格支持
  - Mermaid 图表支持

#### F4: HTML 预览
- **优先级**：P0
- **描述**：预览 HTML 文件
- **功能点**：
  - iframe 沙箱渲染
  - 响应式预览
  - 全屏模式

#### F5: 图片查看
- **优先级**：P0
- **描述**：查看图片文件
- **功能点**：
  - 图片预览
  - 缩放功能
  - 全屏查看

### 3.2 进阶功能

#### F6: 搜索功能
- **优先级**：P1
- **描述**：全文搜索文件内容
- **功能点**：
  - 搜索文件名
  - 搜索内容（MD/HTML）
  - 高亮匹配结果

#### F7: 暗黑模式
- **优先级**：P2
- **描述**：支持暗黑模式切换
- **功能点**：
  - 自动跟随系统
  - 手动切换
  - 记住用户偏好

#### F8: 响应式设计
- **优先级**：P1
- **描述**：支持移动端访问
- **功能点**：
  - 手机端适配
  - 平板端适配
  - 触摸手势支持

---

## 4. 用户流程

### 4.1 首次使用流程

```
1. 用户访问 GitHub 仓库模板
2. 点击 "Use this template" → "Create a new repository"
3. 输入仓库名称（如：my-openclaw-preview）
4. 点击 "Create repository"
5. 等待 GitHub Actions 构建完成（约 1 分钟）
6. 访问 https://username.github.io/my-openclaw-preview
7. 看到欢迎页面，开始使用
```

### 4.2 日常使用流程

```
1. Agent 生成内容（如：课程文档）
2. Skill 自动执行：
   - 复制文件到预览仓库
   - Git commit + push
3. GitHub Pages 自动构建（约 1-2 分钟）
4. 用户访问预览链接
5. 查看最新内容
```

### 4.3 团队协作流程

```
1. 团队成员 fork 主仓库
2. 配置 preview-sync skill
3. 各自的 Agent 输出到同一仓库
4. 所有人都能看到团队所有内容
5. 可通过 Git 分支管理不同版本
```

---

## 5. 技术架构

### 5.1 技术栈

**前端：**
- React 18+ - UI 框架
- Vite - 构建工具
- React Router - 路由
- TailwindCSS - 样式
- React Markdown - MD 渲染
- Prism.js - 代码高亮

**部署：**
- GitHub Pages - 静态托管
- GitHub Actions - 自动构建

**Skill：**
- Shell Script - 文件同步
- Git - 版本管理

### 5.2 目录结构

```
openclaw-preview/
├── src/
│   ├── components/          # React 组件
│   │   ├── Layout.jsx
│   │   ├── Sidebar.jsx
│   │   ├── AgentList.jsx
│   │   ├── FileTree.jsx
│   │   ├── MarkdownViewer.jsx
│   │   ├── HtmlViewer.jsx
│   │   └── ImageViewer.jsx
│   ├── pages/              # 页面组件
│   │   ├── Home.jsx
│   │   ├── Agent.jsx
│   │   └── File.jsx
│   ├── hooks/              # 自定义 Hooks
│   │   ├── useAgents.js
│   │   └── useFiles.js
│   ├── utils/              # 工具函数
│   │   ├── git.js
│   │   └── markdown.js
│   ├── styles/             # 样式文件
│   │   └── index.css
│   ├── App.jsx
│   └── main.jsx
├── public/                 # 静态资源
├── docs/                   # Agent 输出目录（示例）
│   ├── kira/
│   ├── ha/
│   └── hen/
├── .github/
│   └── workflows/
│       └── deploy.yml      # GitHub Actions
├── package.json
├── vite.config.js
├── tailwind.config.js
└── README.md
```

### 5.3 数据结构

**Agent 元数据（agent.json）：**
```json
{
  "id": "kira",
  "name": "Kira",
  "emoji": "⚡",
  "description": "主 AI 助手（技术向）",
  "createdAt": "2024-01-01T00:00:00Z",
  "updatedAt": "2024-02-18T12:00:00Z"
}
```

**文件索引（index.json）：**
```json
{
  "agents": [
    {
      "id": "kira",
      "files": [
        {
          "path": "miniclaw-docs/chapter-01.md",
          "type": "markdown",
          "size": 10240,
          "updatedAt": "2024-02-18T12:00:00Z"
        }
      ]
    }
  ]
}
```

---

## 6. 页面设计

### 6.1 页面结构

**全局布局：**
```
┌─────────────────────────────────────────┐
│  Header（Logo + 搜索 + 设置）             │
├──────────┬──────────────────────────────┤
│          │                              │
│ Sidebar  │  Main Content                │
│ (Agent   │  (文件列表/内容预览)          │
│  列表)   │                              │
│          │                              │
└──────────┴──────────────────────────────┘
```

### 6.2 页面规划

#### 首页（Home）
- **URL**：`/`
- **内容**：
  - 欢迎信息
  - Agent 列表（卡片式）
  - 最近更新
  - 快速统计

#### Agent 详情页（Agent）
- **URL**：`/agent/:agentId`
- **内容**：
  - Agent 信息
  - 文件树
  - 统计数据
  - 快速操作

#### 文件预览页（File）
- **URL**：`/agent/:agentId/file/*filePath`
- **内容**：
  - 文件内容渲染
  - 元数据
  - 操作按钮（下载、分享）

---

## 7. UI/UX 设计原则

### 7.1 设计风格
- **现代简约**：干净的界面，注重内容
- **设计感**：微妙的动效，精致的细节
- **一致性**：统一的视觉语言

### 7.2 色彩方案
- **主色**：蓝色系（#3B82F6）- 专业、可信
- **辅色**：灰色系（#6B7280）- 中性、沉稳
- **强调色**：绿色（#10B981）- 成功、积极
- **背景**：浅灰（#F9FAFB）- 舒适、护眼

### 7.3 字体
- **标题**：Inter / SF Pro Display
- **正文**：Inter / SF Pro Text
- **代码**：JetBrains Mono / Fira Code

### 7.4 间距系统
- **xs**：4px
- **sm**：8px
- **md**：16px
- **lg**：24px
- **xl**：32px

---

## 8. 性能要求

### 8.1 加载性能
- 首屏加载 < 2s
- 路由切换 < 300ms
- 文件渲染 < 1s

### 8.2 运行性能
- 流畅滚动（60fps）
- 快速搜索（< 100ms）
- 响应式交互（< 50ms）

---

## 9. 安全考虑

### 9.1 内容安全
- HTML iframe 沙箱
- XSS 防护
- CSP 策略

### 9.2 隐私保护
- 不收集用户数据
- 本地存储偏好设置
- HTTPS 强制

---

## 10. 上线计划

### 10.1 MVP（最小可行产品）
**时间**：1 周
**功能**：
- ✅ 基础布局
- ✅ Agent 列表
- ✅ 文件浏览
- ✅ Markdown 渲染
- ✅ 图片查看
- ✅ GitHub Pages 部署

### 10.2 V1.0
**时间**：2 周
**功能**：
- ✅ MVP 功能
- ✅ HTML 预览
- ✅ 搜索功能
- ✅ 响应式设计
- ✅ preview-sync skill

### 10.3 V1.5
**时间**：3 周
**功能**：
- ✅ V1.0 功能
- ✅ 暗黑模式
- ✅ 性能优化
- ✅ 文档完善

---

## 11. 成功指标

### 11.1 用户指标
- GitHub Stars > 100
- Fork 数 > 50
- 月活用户 > 100

### 11.2 使用指标
- 文件预览次数 > 1000/月
- 平均停留时间 > 3 分钟
- 跳出率 < 40%

---

## 12. 风险与应对

### 12.1 技术风险
| 风险 | 概率 | 影响 | 应对措施 |
|------|------|------|----------|
| GitHub Pages 宕机 | 低 | 高 | 提供 Vercel 备选方案 |
| 构建失败 | 中 | 中 | 完善错误处理和日志 |
| 大文件加载慢 | 中 | 中 | 实现懒加载和分页 |

### 12.2 用户风险
| 风险 | 概率 | 影响 | 应对措施 |
|------|------|------|----------|
| 配置复杂 | 中 | 高 | 提供一键部署脚本 |
| Git 操作不熟悉 | 中 | 中 | 完善 skill 文档 |
| 隐私顾虑 | 低 | 中 | 强调本地部署选项 |

---

## 13. 后续规划

### 13.1 V2.0 功能
- 实时协作（WebSocket）
- 评论系统
- 版本对比
- 自定义主题

### 13.2 商业化（可选）
- 托管服务（无需自己部署）
- 企业版（私有部署）
- 高级主题商店

---

**文档版本**：v1.0
**更新日期**：2026-02-18
**作者**：Kira ⚡
